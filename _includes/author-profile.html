{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <style>
    /* UNIFIKACJA ODSTĘPÓW I WYRÓWNANIA */
    .author__urls .author__desktop {
      display: flex !important;
      align-items: center !important; 
      flex-wrap: nowrap !important;
      line-height: 1.2 !important;
      margin-bottom: 10px !important; /* Jednolity odstęp pionowy dla wszystkich */
    }

    /* Usunięcie domyślnych marginesów z linków wewnątrz listy */
    .author__urls .author__desktop a {
      display: flex !important;
      align-items: center !important;
      text-decoration: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    /* Styl dla obrazków w sidebarze */
    .sidebar-icon-img {
      width: 18px !important;
      height: 18px !important;
      margin-right: 8px !important;
      flex-shrink: 0 !important;
      filter: none !important;
    }

    /* Filtry dla konkretnych logotypów */
    html[data-theme='dark'] .img-ac { 
      filter: invert(1) brightness(2) !important; 
    }

    .img-ift {
      filter: drop-shadow(0px 0px 1px rgba(0,0,0,0.8)) 
              drop-shadow(0px 0px 2px rgba(0,0,0,0.3)) !important;
    }
    html[data-theme='dark'] .img-ift {
      filter: none !important;
    }
  </style>

  <div class="author__avatar">
    {% if author.avatar contains "://" %}
    	<img src="{{ author.avatar }}" alt="{{ author.name }}"  fetchpriority="high" />
    {% else %}
    	<img src="{{ author.avatar | prepend: "/images/" | prepend: base_path }}" class="author__avatar" alt="{{ author.name }}"  fetchpriority="high" />
    {% endif %}
  </div>

  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>
    {% if author.pronouns %}<p class="author__pronouns">{{ author.pronouns }}</p>{% endif %}
    {% if author.bio %}<p class="author__bio">{{ author.bio }}</p>{% endif %}
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
      <!-- 1. Lokalizacja: PWr -->
      {% if author.location %}
        <li class="author__desktop">
          <img src="{{ '/images/logopwr.png' | relative_url }}" class="sidebar-icon-img" alt="PWr Logo">
          {{ author.location }}
        </li>
      {% endif %}

      <!-- 2. Pracodawca: IFT -->
      {% if author.employer %}
        <li class="author__desktop">
          <img src="{{ '/images/logoift.png' | relative_url }}" class="sidebar-icon-img img-ift" alt="IFT Logo">
          {{ author.employer }}
        </li>
      {% endif %}

      <!-- 3. Academia -->
      {% if author.academia %}
        <li class="author__desktop">
          <a href="{{ author.academia }}" target="_blank" rel="noopener noreferrer">
            <img src="{{ '/images/logoac.svg' | relative_url }}" class="sidebar-icon-img img-ac" alt="Academia Logo">
            Academia
          </a>
        </li>
      {% endif %}

      <!-- 4. ORCID -->
      {% if author.orcid %}
        <li class="author__desktop">
          <a href="{{ author.orcid }}" target="_blank" rel="noopener noreferrer">
            <img src="{{ '/images/logoorcid.svg' | relative_url }}" class="sidebar-icon-img" alt="ORCID Logo">
            ORCID
          </a>
        </li>
      {% endif %}

      <!-- 5. ResearchGate -->
      {% if author.researchgate %}
        <li class="author__desktop">
          <a href="{{ author.researchgate }}" target="_blank" rel="noopener noreferrer">
            <img src="{{ '/images/logorg.svg' | relative_url }}" class="sidebar-icon-img" alt="RG Logo">
            ResearchGate
          </a>
        </li>
      {% endif %}    

    </ul>
  </div>
</div>
